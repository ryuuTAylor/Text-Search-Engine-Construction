<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>E (Search.Search.Engine.E)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Search</a> &#x00BB; <a href="../../index.html">Search</a> &#x00BB; <a href="../index.html">Engine</a> &#x00BB; E</nav><header class="odoc-preamble"><h1>Module type <code><span>Engine.E</span></code></h1><p>An <code>Engine.E</code> indexes words found in text files and answers queries about which files contain which words.</p><p>The case of words is irrelevant to the engine. For example, if a file contains <code>OCaml</code>, <code>ocaml</code>, and <code>OCAML</code>, the engine represents the word in the all-lowercase form <code>ocaml</code>.</p><p>Filenames are stored with their original case and extension, but without any path. For example, <code>dir/A.txt</code> is stored as <code>A.txt</code>.</p><p>A larger example: Suppose a directory named <code>d</code> contains just two files: <code>a.txt</code> and <code>b.txt</code>. Suppose that <code>a.txt</code> contains just the text <code>OCaml is bae</code>. Suppose that <code>b.txt</code> contains just the text <code>salt BAE</code>. Then <code>&quot;d&quot; |&gt; index_of_dir |&gt; to_list</code> could be <code>
      [(&quot;ocaml&quot;, [&quot;a.txt&quot;]);
        (&quot;is&quot;, [&quot;a.txt&quot;]);
        (&quot;bae&quot;, [&quot;a.txt&quot;; &quot;b.txt&quot;]);
        (&quot;salt&quot;, [&quot;b.txt&quot;])]
    </code> or <code>
      [(&quot;ocaml&quot;, [&quot;a.txt&quot;]);
        (&quot;bae&quot;, [&quot;b.txt&quot;; &quot;a.txt&quot;]);
        (&quot;is&quot;, [&quot;a.txt&quot;]);
        (&quot;salt&quot;, [&quot;b.txt&quot;])]
    </code> or several other association lists, but none of the values could be &quot;d/a.txt&quot; or just &quot;a&quot;.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-idx" class="anchored"><a href="#type-idx" class="anchor"></a><code><span><span class="keyword">type</span> idx</span></code></div><div class="spec-doc"><p>The type of an index.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-index_of_dir" class="anchored"><a href="#val-index_of_dir" class="anchor"></a><code><span><span class="keyword">val</span> index_of_dir : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-idx">idx</a></span></code></div><div class="spec-doc"><p><code>index_of_dir d</code> is an index of the files in <code>d</code>. Only files whose names end in <code>.txt</code> are indexed. Only <code>d</code> itself, not any of its subdirectories, is indexed. Raises: Not_found if <code>d</code> is not a valid directory.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-words" class="anchored"><a href="#val-words" class="anchor"></a><code><span><span class="keyword">val</span> words : <span><a href="#type-idx">idx</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>words idx</code> is a set-like list of the words indexed in <code>idx</code>. Regardless of how the word appears in the file, the word will be represented in the list with all characters in lowercase. Example: if a file contains &quot;OCaml&quot; and &quot;OCAML&quot; and &quot;ocaml&quot;, only &quot;ocaml&quot; will appear in the list.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_list" class="anchored"><a href="#val-to_list" class="anchor"></a><code><span><span class="keyword">val</span> to_list : <span><a href="#type-idx">idx</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <span>string list</span>)</span> list</span></span></code></div><div class="spec-doc"><p><code>to_list idx</code> is a representation of <code>idx</code> as an association list. Order in the list is irrelevant. The keys in the list must be equivalent to <code>words idx</code>, ignoring order. The value corresponding to a key is a set-like list of the files in which that word appears. Regarding the case of keys in the list, see <code>words</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-or_not" class="anchored"><a href="#val-or_not" class="anchor"></a><code><span><span class="keyword">val</span> or_not : <span><a href="#type-idx">idx</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>or_not idx ors nots</code> is a set-like list of the files that contain any of the words in <code>ors</code> and none of the words in <code>nots</code>. The case of words in <code>ors</code> and <code>nots</code> is irrelevant. Example: a query with <code>ors = &quot;OCaml&quot;</code> will return the same as <code>ors = &quot;ocaml&quot;</code> and <code>ors = &quot;OCAML&quot;</code>. Requires: <code>ors</code> is not empty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-and_not" class="anchored"><a href="#val-and_not" class="anchor"></a><code><span><span class="keyword">val</span> and_not : <span><a href="#type-idx">idx</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>and_not idx ands nots</code> is a set-like list of the files that contain all of the words in <code>ands</code> and none of the words in <code>nots</code>. The case of words in <code>ands</code> and <code>nots</code> is irrelevant. Example: a query with <code>ands = &quot;OCaml&quot;</code> will return the same as <code>ands = &quot;ocaml&quot;</code> and <code>ands = &quot;OCAML&quot;</code>. Requires: <code>ands</code> is not empty.</p></div></div></div></body></html>